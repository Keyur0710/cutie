<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Shifa ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

<style>
body{
margin:0;
background: radial-gradient(circle at top,#1b0f2e,#090012 70%);
color:white;
overflow:hidden;
font-family:'Poppins',sans-serif;
}

/* Title */
#mainTitle{
position:fixed;
top:40px;
left:50%;
transform:translateX(-50%);
font-family:'Great Vibes',cursive;
font-size:70px;
text-shadow:0 0 25px #ffb6ff;
z-index:5;
text-align:center;
}

/* Button */
#openLetterBtn{
position:fixed;
top:140px;
left:50%;
transform:translateX(-50%);
padding:14px 26px;
font-size:18px;
border:none;
border-radius:25px;
background:linear-gradient(45deg,#ff4fa3,#ff85c8);
color:white;
cursor:pointer;
z-index:6;
box-shadow:0 0 20px rgba(255,100,170,.7);
}

/* Fireworks */
canvas{
position:fixed;
top:0;
left:0;
z-index:0;
pointer-events:none;
}

/* Polaroid */
.polaroid{
position:absolute;
width:240px;
background:white;
padding:12px 12px 22px;
border-radius:10px;
box-shadow:0 18px 45px rgba(0,0,0,.5);
z-index:3;
animation:fade 1s ease;
}
.polaroid img,.polaroid video{
width:100%;
height:180px;
object-fit:contain;
background:black;
border-radius:6px;
}

@keyframes fade{
from{opacity:0;transform:scale(.8);}
to{opacity:1;transform:scale(1);}
}

/* Letter */
#letter{
position:fixed;
inset:0;
background:rgba(0,0,0,.7);
display:none;
justify-content:center;
align-items:center;
z-index:9999;
}
#card{
background:#fff;
color:#333;
max-width:600px;
padding:30px;
border-radius:20px;
line-height:1.7;
}
</style>

</head>

<body>

<canvas id="fireworks"></canvas>

<h1 id="mainTitle">üéâ Happy Birthday Cutie üéâ</h1>
<button id="openLetterBtn">Open My Letter üíå</button>

<div id="letter">
<div id="card">
<h2 style="text-align:center;">HAPPIEST BIRTHDAY SHIFA ‚ù§Ô∏è</h2>

<p>On Feb 19, 2007 the earth got gifted a very special person‚Ä¶ and it's you.</p>

<p>My dearest Shifa, Happy 19th birthday my love! I am truly grateful to have you in my life. Your smile, your heart and your presence make my world brighter.</p>

<p>You bring happiness into my life and I will always cherish every moment with you.</p>

<p style="text-align:center;font-size:20px;"><b>Happy Birthday, Cutie! üíñ</b></p>

<p style="text-align:right;">
With all love,<br>
<b>Oldiee ‚ù§Ô∏èü´∂üíã</b>
</p>

<button onclick="document.getElementById('letter').style.display='none'">Close</button>

</div>
</div>

<script>

/* FIREWORKS */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let particles=[];
setInterval(()=>{
for(let i=0;i<60;i++){
particles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height/2,
dx:(Math.random()-.5)*5,
dy:(Math.random()-.5)*5,
life:100
});
}
},700);

(function animate(){
ctx.fillStyle="rgba(0,0,0,.25)";
ctx.fillRect(0,0,canvas.width,canvas.height);
particles.forEach((p,i)=>{
p.x+=p.dx;
p.y+=p.dy;
p.life--;
ctx.fillStyle="hsl("+Math.random()*360+",100%,70%)";
ctx.fillRect(p.x,p.y,2,2);
if(p.life<=0)particles.splice(i,1);
});
requestAnimationFrame(animate);
})();

/* Letter */
let paused=false;
document.getElementById("openLetterBtn").onclick=function(){
paused=true;
document.getElementById("letter").style.display="flex";
};

/* AUTO MEDIA LOADER */
async function loadMedia(){
try{
let response=await fetch("./photos/");
let text=await response.text();

let parser=new DOMParser();
let html=parser.parseFromString(text,"text/html");

let links=[...html.querySelectorAll("a")];
let files=links
.map(a=>a.getAttribute("href"))
.filter(name=>name.match(/\.(jpg|jpeg|png|gif|mp4|webm)$/i))
.map(name=>"photos/"+name);

startSlideshow(files);

}catch(e){
console.log("Media load error",e);
}
}

function startSlideshow(files){
files.sort(()=>Math.random()-0.5);
let i=0;
let current=null;

function next(){
if(paused||i>=files.length) return;

if(current) current.remove();

let src=files[i++];
let div=document.createElement("div");
div.className="polaroid";

let media;
if(src.match(/\.mp4|\.webm/i)){
media=document.createElement("video");
media.src=src;
media.autoplay=true;
media.muted=true;
media.playsInline=true;
}else{
media=document.createElement("img");
media.src=src;
}

div.appendChild(media);
div.style.left=Math.random()*(window.innerWidth-260)+"px";
div.style.top=Math.random()*(window.innerHeight-260)+"px";

document.body.appendChild(div);
current=div;

setTimeout(next,7000);
}
next();
}

loadMedia();

</script>

</body>
</html>
